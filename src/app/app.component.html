
<div *ngIf="hidePreferences">
  <form [formGroup]="form" >
      <label for="first-name">Add system preference: </label>
      <input id="first-name" type="text" formControlName="text">
    </form>
    <button (click)="onSubmit()">Submit</button>
</div>

<div #content style="height: 80vh;overflow: auto;flex-direction: column-reverse;" >
  <div #messages *ngFor="let transcription of transcriptions" class="messages">
  <h4>{{ transcription.role }}</h4>
    <div class="user">
      <p>{{ transcription.transcript }}</p>
      <audio controls >
        <source [src]="sanitize(url)" type="audio/wav">
      </audio>
  
    </div>
    <h4 style="text-align: end;">{{ transcription.response.role }}</h4>
    <div class="assistent">
      <p>{{ transcription.response.content }}</p>
      <audio controls >
        <source [src]="sanitize(transcription.response.audio)" type="audio/wav">
      </audio>
    </div>
  </div>
</div>

<div *ngIf="loading">
  <h3> the AI is doing his job...</h3>
</div>

<div style="text-align:center; margin: auto; padding-top: 25px;">
  <div (click)="initiateRecording()" class="micon"  *ngIf="!recording">
    <span class='CNToggle' title='Voice recognition enabled. Click to disable' data-cn='micon'>🎙️</span>
    <a class="btn btn-primary"> Start </a>
  </div>
  <div (click)="stopRecording()" class="micoff" *ngIf="recording">
    <span class='CNToggle' title='Voice recognition disabled. Click to enable' data-cn='micoff'>🤫 </span>
    <a class="btn btn-danger" > Stop </a>
  </div>
</div>
